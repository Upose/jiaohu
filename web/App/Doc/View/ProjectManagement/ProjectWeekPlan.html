<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="__DOCLAY__/plugins/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="__CSS__/ProjectWeekPlan.css" media="all">
		<link rel="stylesheet" href="__CSS__/ProjectCollectiontitle.css" media="all">	
    <script src="__STATIC__/jquery-2.0.3.min.js"></script>
	<script src="__STATIC__/vue.min.js"></script>
</head>

<body id="app" >
    <div id="event-view">
			<div class="details_gao">
				<blockquote class="layui-elem-quote">项目里程碑</blockquote>
				<div class="layui-row layui-col-space1">
					<div class="layui-col-md2">
						<div class="grid-demo">
								<img  src="/Public/Doc/images/user.png" alt="">							
						</div>
						<div class="style-agile-border">
						<img  src="/Public/Doc/images/sty1.png" alt="">
						</div>
						<div class="layui_code">商务/售前</div>
					</div>
					<div class="layui-col-md2">
						<div class="grid-demo">
						<ul>
							<li class="layui-tab-zi">
								<a href="{:U('ProjectManagement/ProjectDisplay')}">
								  <h3 class="layui-cite">项目信息</h3>
								</a>
							</li>
							<li class="layui-tab-zi layui-tab-top">
								<a href="{:U('ProjectManagement/ProjectApproval')}">
								<h3 class="layui-cite">立项</h3>
								</a>
							</li>
							<li class="layui-tab-zi layui-tab-top">
								<a href="{:U('ProjectManagement/ProjectCollection')}">
								<h3 class="layui-cite">项目成员</h3>
								</a>
							</li>
							<li class="layui-tab-zi layui-tab-top">
								<a href="{:U('ProjectManagement/ProjectCustomer')}">
								<h3 class="layui-cite">客户关系</h3>
								</a>
							</li>
						</ul>
						</div>
						<div class="style-agile-border">
						<img  src="/Public/Doc/images/sty1.png" alt="">
						</div>
						<div class="layui_code">启动</div>
					</div>
					<div class="layui-col-md2">
						<div class="grid-demo">
							<ul>
							<li class="layui-tab-zhong">
								<a href="{:U('Feedback/index')}">
								<h3 class="layui-cite">里程碑计划</h3>
								</a>
							</li>
							<li class="layui-tab-zhong layui-tab-top layui-red">
								<a href="{:U('ProjectManagement/ProjectWeekPlan')}">
								<h3 class="layui-cite">工作计划</h3>
								</a>
							</li>
						</ul>
						</div>
						<div class="style-agile-border">
						<img  src="/Public/Doc/images/sty1.png" alt="">
						</div>
						<div class="layui_code">计划管理</div>
					</div>
					<div class="layui-col-md2">
						<div class="grid-demo">
						<ul>
							<li class="layui-tab-zi">
								<a href="{:U('Feedback/index')}">
								<h3 class="layui-cite">周报管理</h3>
								</a>
							</li>
							<li class="layui-tab-zi layui-tab-top">
								<a href="{:U('ProjectManagement/ProjectMinutes')}">
								<h3 class="layui-cite">会议管理</h3>
								</a>
							</li>
							<li class="layui-tab-zi layui-tab-top">
								<a href="{:U('ProjectManagement/Projectrisk')}">
								<h3 class="layui-cite">风险管理</h3>
								</a>
							</li>
							<li class="layui-tab-zi layui-tab-top">
								<a href="{:U('ProjectManagement/ProjectEvent')}">
								<h3 class="layui-cite">事件管理</h3>
								</a>
							</li>
						</ul>
						</div>
						<div class="style-agile-border">
						<img  src="/Public/Doc/images/sty1.png" alt="">
						</div>
						<div class="layui_code">执行管理</div>
					</div>
					<div class="layui-col-md2">
						<div class="grid-demo">
						<ul>
							<li class="layui-tab-zhonging">
								<a href="{:U('ProjectManagement/ProjectText')}">
								<h3 class="layui-cite">测试报告</h3>
								</a>
							</li>
						</ul>
						</div>
						<div class="style-agile-border">
						<img  src="/Public/Doc/images/sty1.png" alt="">
						</div>
						<div class="layui_code">测试联调</div>
					</div>
					<div class="layui-col-md2">
						<div class="grid-demo">
						<ul>
							<li class="layui-tab-zhonging">
								<a href="{:U('ProjectManagement/ProjectTextrun')}">
								<h3 class="layui-cite">试运行记录</h3>
								</a>
							</li>
						</ul>
						</div>
						<div class="style-agile-border">
						<img  src="/Public/Doc/images/sty1.png" alt="">
						</div>
						<div class="layui_code">试运行</div>
					</div>
					<div class="layui-col-md2">
						<div class="grid-demo">						
						<ul>
							<li class="layui-tab-zhongpp">
								<a href="{:U('ProjectManagement/ProjectAcceptance')}">
								<h3 class="layui-cite">项目验收</h3>
								</a>
							</li>
							<li class="layui-tab-zhongpp layui-tab-top">
								<a href="{:U('KnowledgeSharing/index')}">
								<h3 class="layui-cite">成员考勤</h3>
								</a>
							</li>
							<li class="layui-tab-zhongpp layui-tab-top">
								<a href="{:U('KnowledgeSharing/index')}">
								<h3 class="layui-cite">成员考核</h3>
								</a>
							</li>
						</ul>
						</div>
						<div class="layui_code">验收归档</div>
					</div>
				</div>
			</div>
			<div class="details_zhong">
				<div>
				<blockquote class="layui-elem-quote addThispro">计划信息列表</blockquote>
				<button class="addThisPeo" id="btnzeng">新增计划</button>
				</div>
				<table class="layui-table">
						<thead>
								<tr>
										<th>验收项目</th>
										<th>验收地点</th>
										<th>验收时间</th>
										<th>验收人员</th>
										<th>验收内容</th>
										<th>验收评价</th>
										<th>备注</th>
								</tr>
						</thead>
						<tbody>
								<tr v-for="item in arrList">
										<td>{{item.theme}}</td>
										<td>{{item.address}}</td>
										<td>{{item.meeting_time}}</td>
										<td>{{item.meeting_level}}</td>
										<td>{{item.department_id}}</td>
										<td>{{item.department_id}}</td>
										<td style="cursor:pointer;" @click="openNew(item.id)">
											<a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
											<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
										</td>
								</tr>
						</tbody>
				</table>
			</div>
		</div>
		<!-- 新增功能弹框 -->
			<div class="layui-row" id="addPeople" style="display: none;padding: 20px 30px;">
				<div class="layui-col-md12">
						<form class="layui-form" id="addEmployeeForm">
							<div class="layui-col-md6">
								<div class="layui-form-item">
										<label class="layui-form-label">计划名称：</label>
										<div class="layui-input-block">
											<select name="conpany_add" id="conpany_add" lay-verify="required" id="add_department" lay-filter="see_depart">
													<option value="">请选择计划名称</option>
											</select>
										</div>
								</div>
							</div>
							<div class="layui-col-md6">
								<div class="layui-form-item">
										<label class="layui-form-label">里程碑id：</label>
										<div class="layui-input-block">
												<input type="text" name="conpany" class="layui-input" lay-verify="required">
										</div>
								</div>
							</div>
							<div class="layui-col-md6">
								<div class="layui-form-item">
										<label class="layui-form-label">责任人：</label>
										<div class="layui-input-block">
												<input type="text" name="conpany" class="layui-input" lay-verify="required">
										</div>
								</div>
							</div>
							<div class="layui-col-md6">
								<div class="layui-form-item">
										<label class="layui-form-label">人员姓名：</label>
										<div class="layui-input-block">
												<input type="text" name="conpany" class="layui-input" lay-verify="required">
										</div>
								</div>
							</div>
							<div class="layui-col-md6">
								<div class="layui-form-item">
										<label class="layui-form-label">岗位职责：</label>
										<div class="layui-input-block">
												<input type="text" name="conpany" class="layui-input" lay-verify="required">
										</div>
								</div>
							</div>
							<div class="layui-col-md6">
								<div class="layui-form-item">
										<label class="layui-form-label">计划类别：</label>
										<div class="layui-input-block">
												<input type="text" name="conpany" class="layui-input" lay-verify="required">
										</div>
								</div>
							</div>
							<div class="layui-col-md6">
								<div class="layui-form-item">
										<label class="layui-form-label">开始时间：</label>
										<div class="layui-input-block">
												<input type="text" name="conpany" id="test1" class="layui-input" lay-verify="required">
										</div>
								</div>
							</div>
							<div class="layui-col-md6">
								<div class="layui-form-item">
										<label class="layui-form-label">结束时间：</label>
										<div class="layui-input-block">
												<input type="text" name="conpany" id="test2" class="layui-input" lay-verify="required">
										</div>
								</div>
							</div>
							<div class="layui-col-md12">
								<div class="layui-form-item">
										<label class="layui-form-label">计划内容：</label>
										<div class="layui-input-block">
												<textarea name="textject1" placeholder="" class="layui-textarea"></textarea>
										</div>
								</div>
							</div>
							<div class="layui-col-md12">
								<div class="layui-form-item">
									<label class="layui-form-label">相关备注：</label>
									<div class="layui-input-block">
										<textarea name="textject" placeholder="" class="layui-textarea"></textarea>
									</div>
								</div>	
							</div>
							<div class="layui-form-item">
								<div class="layui-input-block">
									<button class="layui-btn" lay-submit="" lay-filter="demoone">提交</button>
									<button type="reset" class="layui-btn layui-btn-primary">重置</button>
								</div>
							</div>	
						</form>
				</div>
		</div>
</body>
<script src="__DOCLAY__/plugins/layui/layui.js"></script>
<script>
	var form,layedit,layer,laydate; 
	layui.use(['form', 'layedit', 'laydate','table'], function(){
	  form = layui.form,
		layer = layui.layer,
		layedit = layui.layedit,
		laydate = layui.laydate;
	//开始运行日期 
		laydate.render({
			elem: '#test1'
			});
	//结束时间
		laydate.render({
			elem: '#test2'
			});
			
			selectProject();   //  选择项目计划内容
		});
		
		// 添加项目组成员
		$('.addThisPeo').on('click',function(){
				layer.open({
						type: 1,
						title: '新增风险',
						closeBtn: 2,   // 关闭样式
						shadeClose: true,  // 关闭方式
						anim:5,    // 弹出样式
						area: ['48vw', '78vh'],
						// btn:['确定','取消'],
						isOutAnim:false,    // 关闭动画
						content: $('#addPeople'),
				})
		}); 
		
		function selectProject(){
			$.ajax({
			url:"{:U('ItemMilepost/selPlan')}",
			type: 'post',
			data: {
				pro_code:233,
			},
			dataType: 'json',
			success: function(data) {
					if (data.code == 200) {
							var result = data.data || [];
							console.log(result[0].plan_code);
							var role = document.getElementById("conpany_add");        //add_role_name给select定义的id     	      	      
							for (var i = 0; i<result.length; i++) {
									var option = document.createElement("option");    // 创建添加option属性
									option.setAttribute("value",result[i].plan_code);                  // 给option的value添加值
									option.innerText= result[i].plan_name;             // 打印option对应的纯文本 （超级管理员、管理员）
									role.appendChild(option);                          // 给select 添加option子标签
									form.render("select");                                // 刷性select，显示出数据        
									} 
					}
			}    
			})
		}			

</script>
</html>